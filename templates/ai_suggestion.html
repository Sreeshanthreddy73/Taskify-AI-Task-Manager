{% extends "layout.html" %}
{% block content %}

<h2 class="mb-3"><i class="bi bi-lightbulb"></i> AI Suggestions</h2>
<a href="/" class="btn btn-secondary mb-3"><i class="bi bi-arrow-left"></i> Back</a>

<form method="POST" class="card p-3 shadow-sm mb-3">
  <label class="form-label">Project description</label>
  <textarea name="project_desc" class="form-control" rows="3" required>{{ project_desc if project_desc else '' }}</textarea>
  <div class="mt-3">
    <button class="btn btn-warning text-dark"><i class="bi bi-robot"></i> Generate</button>
  </div>
</form>

{% if error %}
  <div class="alert alert-danger">{{ error }}</div>
{% endif %}

{% if suggestions %}
  <div class="card p-3 shadow-sm">
    <h5>Suggested tasks</h5>
    <ul class="list-group">
      {% for s in suggestions %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ s }}
        <form method="POST" action="/add-suggestion" style="margin:0;">
          <input type="hidden" name="task_text" value="{{ s }}">
          <button class="btn btn-sm btn-success">Add as Task</button>
        </form>
      </li>
      {% endfor %}
    </ul>
  </div>
{% endif %}

{% endblock %}
